<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you go on a date with me?</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#ff6b6b;--muted:#94a3b8}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;display:grid;place-items:center;background:var(--bg);color:#e6eef8;transition:background 0.5s ease}
    .card{width:min(780px,92vw);background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:28px 28px 36px;box-shadow:0 10px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03);text-align:center}
    h1{margin:0 0 8px;font-size:28px}
    p.lead{margin:0 0 22px;color:var(--muted)}
    #button-area{position:relative;height:150px;display:flex;align-items:center;justify-content:center}
    .btn{appearance:none;border:0;padding:14px 22px;border-radius:12px;font-weight:600;cursor:pointer;user-select:none;transition:transform .15s ease, box-shadow .15s ease}
    #yesBtn{background:linear-gradient(90deg,var(--accent),#ff8e8e);color:#081022;box-shadow:0 8px 22px rgba(255,107,107,0.18)}
    #noBtn{position:absolute;background:transparent;color:#e6eef8;border:2px solid rgba(230,238,248,0.08);padding:12px 18px;border-radius:12px}
    #noBtn.moved{box-shadow:0 8px 30px rgba(0,0,0,0.5);}
    footer.small{margin-top:14px;color:var(--muted);font-size:13px}

    /* floating hearts background */
    .hearts-bg{position:fixed;inset:0;overflow:hidden;z-index:-1;}
    .hearts-bg span{position:absolute;color:#ff6b6b;font-size:20px;animation:float 6s linear infinite;opacity:0.8}
    @keyframes float{0%{transform:translateY(100vh) scale(0.8);opacity:0}20%{opacity:1}80%{opacity:1}100%{transform:translateY(-10vh) scale(1.2);opacity:0}}

    /* responsive */
    @media (max-width:420px){h1{font-size:20px}}

    canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
  </style>
</head>
<body>
  <div class="card" id="card">
    <h1 id="title">Will you go on a date with me?</h1>
    <p class="lead" id="message">I promise good company, terrible jokes, and maybe dessert‚Äîchoose wisely ‚ù§Ô∏è</p>

    <div id="button-area" aria-hidden="false">
      <button id="yesBtn" class="btn">Yes</button>
      <button id="noBtn" class="btn" aria-label="No">No</button>
    </div>
  </div>

  <div class="hearts-bg" id="heartsBg"></div>
  <canvas id="fireworks"></canvas>

  <script>
    (function(){
      const container = document.getElementById('button-area');
      const noBtn = document.getElementById('noBtn');
      const yesBtn = document.getElementById('yesBtn');
      const card = document.getElementById('card');
      const title = document.getElementById('title');
      const message = document.getElementById('message');
      const heartsBg = document.getElementById('heartsBg');

      function placeInitial(){
        yesBtn.style.position = 'relative';
        yesBtn.style.zIndex = 2;
        const area = container.getBoundingClientRect();
        const nx = Math.max(10, area.width/2 + 80);
        const ny = (area.height - noBtn.offsetHeight)/2;
        noBtn.style.left = nx + 'px';
        noBtn.style.top = ny + 'px';
      }

      function moveNo(){
        const area = container.getBoundingClientRect();
        const btnW = noBtn.offsetWidth;
        const btnH = noBtn.offsetHeight;
        const yesRect = yesBtn.getBoundingClientRect();
        const padding = 8;
        const maxX = Math.max(0, area.width - btnW - padding);
        const maxY = Math.max(0, area.height - btnH - padding);

        let attempts = 0;
        while(attempts < 40){
          const x = Math.floor(Math.random() * (maxX + 1));
          const y = Math.floor(Math.random() * (maxY + 1));
          const absX = area.left + x;
          const absY = area.top + y;
          const dx = (absX + btnW/2) - (yesRect.left + yesRect.width/2);
          const dy = (absY + btnH/2) - (yesRect.top + yesRect.height/2);
          const dist = Math.hypot(dx,dy);
          if(dist > Math.max(120, Math.min(area.width, area.height)/4)){
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
            noBtn.classList.add('moved');
            return;
          }
          attempts++;
        }
        const fallbackX = (noBtn.offsetLeft + area.width/2) % maxX;
        const fallbackY = (noBtn.offsetTop + 30) % maxY;
        noBtn.style.left = fallbackX + 'px';
        noBtn.style.top = fallbackY + 'px';
      }

      function handleMove(e){
        const area = container.getBoundingClientRect();
        const mouseX = e.clientX - area.left;
        const mouseY = e.clientY - area.top;
        const btnRect = noBtn.getBoundingClientRect();
        const btnX = btnRect.left - area.left + btnRect.width/2;
        const btnY = btnRect.top - area.top + btnRect.height/2;
        const dist = Math.hypot(mouseX - btnX, mouseY - btnY);
        const threshold = Math.max(80, Math.min(area.width, area.height) * 0.18);
        if(dist < threshold){
          moveNo();
        }
      }

      function handleTouch(e){
        if(!e.touches || e.touches.length === 0) return;
        const t = e.touches[0];
        const area = container.getBoundingClientRect();
        const touchX = t.clientX - area.left;
        const touchY = t.clientY - area.top;
        const btnRect = noBtn.getBoundingClientRect();
        const btnX = btnRect.left - area.left + btnRect.width/2;
        const btnY = btnRect.top - area.top + btnRect.height/2;
        const dist = Math.hypot(touchX - btnX, touchY - btnY);
        if(dist < 120) moveNo();
      }

      container.addEventListener('mousemove', handleMove);
      container.addEventListener('touchstart', handleTouch);
      container.addEventListener('touchmove', handleTouch);
      noBtn.addEventListener('mouseenter', ()=> moveNo());
      noBtn.addEventListener('click', (e)=>{
        e.preventDefault();
        noBtn.textContent = 'üòÖ Nope';
        moveNo(true);
      });

      // Fireworks setup
      const canvas = document.getElementById('fireworks');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      class Particle{
        constructor(x,y,color){
          this.x = x;
          this.y = y;
          this.color = color;
          this.radius = Math.random()*3+2;
          this.speed = Math.random()*8+4; // doubled explosion power
          this.angle = Math.random()*2*Math.PI;
          this.opacity = 1;
          this.decay = Math.random()*0.02+0.01;
        }
        update(){
          this.x += Math.cos(this.angle)*this.speed;
          this.y += Math.sin(this.angle)*this.speed;
          this.speed *= 0.92;
          this.opacity -= this.decay;
        }
        draw(){
          ctx.globalAlpha = this.opacity;
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }

      const particles = [];
      function Firework(x,y){
        const colors = ['#ff6b6b','#ffd93d','#6bcfff','#a29bfe','#55efc4'];
        for(let i=0;i<30;i++){
          particles.push(new Particle(x,y,colors[Math.floor(Math.random()*colors.length)]));
        }
      }

      function animate(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(let i=particles.length-1;i>=0;i--){
          const p = particles[i];
          p.update();
          p.draw();
          if(p.opacity <= 0){
            particles.splice(i,1);
          }
        }
        requestAnimationFrame(animate);
      }
      animate();

      yesBtn.addEventListener('click', ()=>{
        document.body.style.background = 'lightpink';
        title.textContent = 'Yay! üéâ';
        message.textContent = "Thanks for saying yes ‚Äî I'll text you the details. üíå";
        message.style.color = 'black';
        container.style.display = 'none';

        for(let i=0;i<20;i++){
          const span = document.createElement('span');
          span.textContent = 'üåª ‚ù§Ô∏è';
          span.style.left = Math.random()*100 + 'vw';
          span.style.fontSize = (20 + Math.random()*30) + 'px';
          span.style.animationDuration = (4 + Math.random()*4)+'s';
          heartsBg.appendChild(span);
        }

        setInterval(()=>{
          Firework(
            Math.random()*canvas.width,
            Math.random()*canvas.height/1.5
          );
        }, 600);
      });

      window.addEventListener('load', placeInitial);
      window.addEventListener('resize', ()=>{
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        setTimeout(placeInitial,120);
      });
      noBtn.addEventListener('focus', ()=> moveNo());
    })();
  </script>
</body>
</html>
